<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Tag Library Template</title>
    <script type="text/javascript">
    
		function relayout(event){
			
			var winW = 630, winH = 460;
			
			if (document.body && document.body.offsetWidth) {
			 	winW = document.body.offsetWidth;
				winH = document.body.offsetHeight;
			}
			if (document.compatMode=='CSS1Compat' &&
			    document.documentElement &&
			    document.documentElement.offsetWidth ) {
			 	winW = document.documentElement.offsetWidth;
			 	winH = document.documentElement.offsetHeight;
			}
			if (window.innerWidth && window.innerHeight) {
			 	winW = window.innerWidth;
			 	winH = window.innerHeight;
			}
			
			console.log('Window width = '+winW);
			console.log('Window height = '+winH);
				
			var eleBtns=document.getElementById('divTagButtons');
			if(!eleBtns) return;
			var eleTagList=document.getElementById('divTagListViewHost');
			if(!eleTagList) return;
			var editor=document.getElementById('divTagEditorHost');
			if(!editor) return;
			
			if(editor.style.display=='none'){
				var rt=eleBtns.getBoundingClientRect();
				//eleTagList.style.top=rt.bottom+20+ 'px'; 
				//eleTagList.style.height=window.innerHeight-rt.bottom-5 + 'px';
				//eleTagList.style.height=window.clientHeight-rt.bottom-5 + 'px'; // For IE, Doesn't work;
				eleTagList.style.height=winH-rt.bottom-10 + 'px';
			} else {					
				var rt1=editor.getBoundingClientRect();
				//eleTagList.style.top=rt1.bottom+10+ 'px';
				//eleTagList.style.bottom='5px';	// this doesn't work if it is not position: absolute;
				// Without position:absolute; eleTagList is of height=0.
				//var eleParent=editor.parentNode;
				//var rt2=eleParent.getBoundingClientRect();
				//eleTagList.style.height=rt2.height-rt1.bottom-5 + 'px';
				//eleTagList.style.height=window.innerHeight-rt1.bottom-5 + 'px';
				//eleTagList.style.height=window.clientHeight-rt1.bottom-5 + 'px'; // For IE, Doesn't work;
				// From tests in IE, both window.clientHeight and innerHeight are undefined.
				eleTagList.style.height=winH-rt1.bottom-10 + 'px';
				
			}
			
			
			
			
			
		}
		function openEditor(event){
			var editor=document.getElementById('divTagEditorHost');
			if(!editor) return;
			editor.style.display='block';
			relayout();
			
		}
		function closeEditor(event){
			var editor=document.getElementById('divTagEditorHost');
			if(!editor) return;
			editor.style.display='none';
			relayout();
		}
	</script>
	<style type="text/css">
		.border1r{border: red solid 1px}
		.border1g{border: green solid 1px}
		.border1b{border: blue solid 1px}
		.border1y{border: yellow solid 1px}
		.border1p{border: purple solid 1px}
	</style>
</head>
<body onresize="relayout(event)" style='display:block;left:0px;right:0px;top:0px'>
    <div id='divTagButtons' style='display:block;left:0px;right:0px;top:0px'  class='border1r' >     
        <button style='width:120px' id='btnTagCreate' onclick="openEditor(event)" >Create</button>        
        <button style='width:120px' id='btnTagEdit' >Edit</button> 
        <button style='width:120px' id='btnTagEdit' >Delete</button> 
    </div>  
	<div id='divTagEditorHost' style='width:100%; height:120px;clear:both' class='border1y'>   
       <button style='width:120px' id='btnEditClose' onclick="closeEditor(event)">Close</button>   
    </div>    
    <div id='divTagListViewHost' 
    style='display:block; top:100px; left:0px;right:0px;bottom:0px;overflow-x:off;overflow-y:scroll;min-height:200px;'
    	class='border1b' >     
    </div>
</body>
</html>
