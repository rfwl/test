<html>
	<head>
		<title>This is a HTMLImage test</title>
		<script src="js_generate_bitmap.js"></script>
		<script type="text/javascript">
			var red1 = 255;
			var green1 = 0;
			var blue1 = 0;
			var red2 = 0;
			var green2 = 0;
			var blue2 = 255;
			var step = 10;
			var rectangle = [10, 10, 50, 50];
			var stepX = 10;
			var stepY = 10;

			function test()
			{
				var canvasWidth = 320;
				var canvasHeight = 240;
				var graphics = createGraphics(canvasWidth, canvasHeight);
				var s = new Date();
				graphics.gradientRectangleH(0, 0, canvasWidth, canvasHeight, new Color(red1,green1,blue1), new Color(red2,green2,blue2));
				graphics.fillRectangle(100, 100, 200, 200, new Color(255,255,255));
				graphics.fillRectangleAlpha(rectangle[0], rectangle[1], rectangle[2], rectangle[3], new Color(0,255,0), 50);
				var e1 = new Date();
				graphics.updateImage("myImage");
				var e2 = new Date();
				var info = document.getElementById("info");
				info.innerHTML= "Drawing time: " + (e1.getTime()-s.getTime()).toString() + "[ms]<br>";
				info.innerHTML+= "Update time: " + (e2.getTime()-e1.getTime()).toString() + "[ms]<br>";
				info.innerHTML+= "Total time: " + (e2.getTime()-s.getTime()).toString() + "[ms]";
				red1 -= step;
				blue1 += step;
				red2 += step;
				blue2 -= step;
				if ((red1 < 0) || (red2 > 255) || (red2 < 0) || (red1 > 255))
				{
					step = -step;
					red1 -= step;
					blue1 += step;
					red2 += step;
					blue2 -= step;
				}
				rectangle[0] += stepX;
				rectangle[1] += stepY;
				rectangle[2] += stepX;
				rectangle[3] += stepY;
				if ((rectangle[0] <= 0) || (rectangle[2] >= canvasWidth))
				{
					stepX =- stepX;
				}
				if ((rectangle[1] <= 0) || (rectangle[3] >= canvasHeight))
				{
					stepY =- stepY;
				}
				window.setTimeout(test, 100);
			}
		</script>
	</head>

	<body onload="test()">
		<img id="myImage"></img>
		<div id="info"></div>
	</body>
</html>