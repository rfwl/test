<html>
<body>

<p id="demo"></p>

<script>
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
  if (xhttp.readyState == 4 && xhttp.status == 200) {
    myFunction(xhttp);
  }
};
//xhttp.open("GET", "flexpage.xml", true);
xhttp.open("GET", "ssrs_report.xml", true);
xhttp.send();

function myFunction(xml) {
  var parser, xmlDoc;
  parser = new DOMParser();
  xmlDoc = parser.parseFromString(xml.responseText,"text/xml");
  document.getElementById("demo").innerHTML =
  myLoop(xmlDoc.documentElement);
}

function myLoop1(x) {
  var i, y, xLen, txt;
  txt = "";
  x = x.childNodes;
  xLen = x.length;
  for (i = 0; i < xLen ;i++) {
    y = x[i];
    if (y.nodeType != 3) {
      if (y.childNodes[0] != undefined) {
        txt += myLoop(y);
      }
    } else {
    txt += y.nodeValue + "<br>";
    }
  }
  return txt; 
}
var lvl=0;
function myLoop(xmlNode) {
		if(!xmlNode) return "";
		var children = xmlNode.childNodes;
		if(!children ) return "";
		
		lvl++;
		
		var prefix="";
		for(var i=0; i<lvl; i++)
		{
			prefix += "---";
		}
		var ret = prefix + xmlNode.nodeName + ": ";
		
		
		//for(var i=0; i<children.length; i++){
		//	var childNode = children[i];
		//	if(childNode.nodeType!=2) continue;
		//	if(attrs.length>0) attrs += " ";
		//	attrs += childNode.nodeName + ": " + childNode.nodeValue;
		//}
		var attrs = "";
		if(xmlNode.attributes && xmlNode.attributes.length){			
			for(var i=0; i<xmlNode.attributes.length; i++){
				var attr = xmlNode.attributes[i];	
				if(attrs.length>0) attrs += " ";
				attrs += attr.nodeName + "=" + attr.nodeValue;
			}
		}		
		for(i=0; i<children.length; i++){
			var childNode = children[i];
			if(childNode.nodeType!=1) continue;
			if(isSimpleXmlElement(childNode)){
				var txtNdVal = getSimpleXmlElementText(childNode);			
				if(attrs.length>0) txt += ",";				
				attrs += childNode.nodeName + "=" + txtNdVal;
			}
		}
		if(attrs.length>0)
				ret += "{" + attrs + "}&nbsp;&nbsp;&nbsp;";
		
		
		
		//var txt = xmlNode.nodeValue; //Element node cannot use nodeValue to return its text node.
		
		var txt="";
		var cnt=0;		
		for(i=0; i<children.length; i++){
			var childNode = children[i];
			if(childNode.nodeType!=3) continue;			
			if(txt.length>0) txt += ",";
			txt += childNode.nodeValue;
			cnt++;
		}
		//if(txt && txt.length>0)
			ret += "[" + cnt + "]<br\>";
		
		//for(i=0; i<children.length; i++){
		//	childNode = children[i];
		//	if(childNode.nodeType==1 || childNode.nodeType==3) continue;			
		//	ret += "[*(type,name,value)=" + childNode.nodeType + ", " + childNode.nodeName + ", " + childNode.nodeValue + "*]<br\>";
		//}
		
		for(i=0; i<children.length; i++){
			childNode = children[i];
			if(childNode.nodeType!=1) continue;
			if(isSimpleXmlElement(childNode)) continue;
			ret += myLoop(childNode);
		}
		
		lvl--;
		return ret;
		
	} //end of function

	
	function isSimpleXmlElement(xmlNode){
		if(!xmlNode) return false;		
		if(!xmlNode.childNodes ) return false;
		if(xmlNode.nodeType!=1) return false;
		if(xmlNode.attributes && xmlNode.attributes.length && xmlNode.attributes.length>0) return false;
		
		var txtNodeCount=0;		
		for(var i=0; i<xmlNode.childNodes.length; i++){
			var childNode = xmlNode.childNodes[i];
			if(childNode.nodeType==3){ 
				if(txtNodeCount>0) 
					return false;
				else
					txtNodeCount++;
			} else {
				return false;
			}
		}
		return true;		
	} 
	
	function getSimpleXmlElementText(xmlNode){
		//if(!isSimpleXmlElement(xmlNode)) return false;		
		for(var i=0; i<xmlNode.childNodes.length; i++){
			var childNode = xmlNode.childNodes[i];
			if(childNode.nodeType==3) 				
					return childNode.nodeValue;
		}
		return null;
	}
	
this.buildTreeItemFromXMLNode= function(xmlNode,depth,parentItem){
	if(!xmlNode) return null;
	if(!xmlNode) return "";	
	
	// Get a string for all the attributes
	var attributes = "";
	if(xmlNode.attributes && xmlNode.attributes.length){	
		for(var i=0; i<xmlNode.attributes.length; i++){
			var attr = xmlNode.attributes[i];	
			if(attributes.length>0) attributes += " ";
			attributes += attr.nodeName + "=" + attr.nodeValue;
		}
	}
	// 
	var children = xmlNode.childNodes;
	// Get a string for all the text nodes 
	var texts="";		
	if(children && children.length) {
		for(i=0; i<children.length; i++){
			var childNode = children[i];
			if(childNode.nodeType!=3) continue;
			if(texts.length>0) texts += ",";
			texts += childNode.nodeValue;
		}
	}
	// Build the new tree item
	var nuItem = new M2ATreeItem(xmlNode.nodeName,attributes,texts);
	nuItem.sourceObject = xmlNode;
	nuItem.treeDepth=depth;
	nuItem.treeItemId = this.treeItemIdGenerator.extractId(xmlNode);
	nuItem.dataTypeName = xmlNode.nodeName;
	nuItem.currentViewStateName = 'default';
	nuItem.parentTreeItem = parentItem;  
	
	// Go through the children recursively
	if(children && children.length) {
		for(i=0; i<children.length; i++){
			var child = srcChildren[i];
			var childItem = this.buildTreeItemFromXMLNode(child,depth+1,nuItem);
			if(!childItem) continue;
			nuItem.children.push(childItem);
			if(children.length==1){
				childItem.isLastChild=childItem.isFirstChild=true;
			} else {                    
				if(i==0)
					childItem.isFirstChild=true;
				else 
					childItem.isFirstChild=false;	
			
				if(i==children.length-1)
					childItem.isLastChild=true;
				else 
					childItem.isLastChild=false;                                     
			}
		} //end o for
	} //end of if	
	return nuItem;
 } // end of function

</script>

</body>
</html>