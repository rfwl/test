<!doctype html>
<html>
<head>
  <title>Test Page Code Base</title>
<!--
<link rel="stylesheet" href="css/main.css" type="text/css"></link>
<script type="text/javascript" src="js/main.js" ></script>
-->    
<style type="text/css">
    #myButton {
      border: solid black 1px;
      color: black;
      padding: 2px;
      -moz-box-shadow:black 2px 2px;
    }
</style>  
<script type="text/javascript">
    
function convert() {
    
    var src = document.getElementById("srcTextArea");
    var str = src.value;    
    //-----------------------------------------------------
	// Modify braced id attributes: id='{   }' or id="{  }" with prefix
	var oldScannedLoc=0, newScannedLoc=1;  // prevent endless while loop.
	var foundBracedId = true;
	while(foundBracedId && newScannedLoc > oldScannedLoc) {
		foundBracedId = false;			 
		
		var single_quote_open_brace = str.indexOf("id='{");
		var single_quote_close_brace = str.indexOf("}'");
		var double_quote_open_brace = str.indexOf('id="{');
		var double_quote_close_brace = str.indexOf('}"');	
		
		oldScannedLoc = newScannedLoc;  			 
		newScannedLoc = Math.max(single_quote_open_brace,double_quote_open_brace);
		if(newScannedLoc < 0) break;	
		
		var foundId, bracedId;
		if(single_quote_open_brace >= 0 && single_quote_close_brace > single_quote_open_brace + 5){
			foundId=str.substring(single_quote_open_brace + 5,single_quote_close_brace);
			bracedId = str.substring(single_quote_open_brace + 4,single_quote_close_brace+1);
			foundBracedId = true;
		}else if(double_quote_open_brace >= 0 && double_quote_close_brace > double_quote_open_brace + 5){
			foundId=str.substring(double_quote_open_brace + 5,double_quote_close_brace);
			bracedId = str.substring(double_quote_open_brace + 4,double_quote_close_brace+1);			
			foundBracedId = true;
		}
		if(foundBracedId) {		
			var generatedId = 'generatedId'; //this.elementIdGenerator.getId_DataArea_Part(treeItem,foundId);
			str = str.replace(bracedId,generatedId);
		}
	} // end of while
	//-----------------------------------------------------
	// Modify braced event listeners: ="{listener_name(event)}"  or ='{listener_name(event)}' or ="{listener_name()}" or ='{listener_name()}'    
	var foundBracedListener = true;	
	oldScannedLoc=0;
	newScannedLoc=1;
	while(foundBracedListener  && newScannedLoc > oldScannedLoc) {
		foundBracedListener = false;
		
		single_quote_open_brace = str.indexOf("='{");
		single_quote_close_brace = str.indexOf("}'");
		double_quote_open_brace = str.indexOf('="{');
		double_quote_close_brace = str.indexOf('}"');	
		
		oldScannedLoc = newScannedLoc;  			 
		newScannedLoc = Math.max(single_quote_open_brace,double_quote_open_brace);
		if(newScannedLoc < 0) break;	
		
		var foundListener, bracedListener;
		if(single_quote_open_brace >= 0 && single_quote_close_brace > single_quote_open_brace + 3){
			foundListener=str.substring(single_quote_open_brace + 3,single_quote_close_brace);
			bracedListener = str.substring(single_quote_open_brace + 2,single_quote_close_brace+1);
			foundBracedListener = true;
		}else if(double_quote_open_brace >= 0 && double_quote_close_brace > double_quote_open_brace + 3){
			foundListener=str.substring(double_quote_open_brace + 3,double_quote_close_brace);
			bracedListener = str.substring(double_quote_open_brace + 2,double_quote_close_brace+1);			
			foundBracedListener = true;
		}
		if(foundBracedListener) {		
			var generatedListener = 'generatedListener(event)'; //this.instanceName + '.executeEventListener(event,' + foundBracedListener + ')';
			str = str.replace(bracedListener,generatedListener);
		}
	} // end of while
    
    var rslt = document.getElementById("rsltTextArea");
    rslt.value=str;
}    
    
</script>
</head>
<body >
	<div>
		<button onclick="convert(event)"> Convert </button>
	</div>
  <div>
  	<textarea id="srcTextArea" cols="100" rows="10" >
  	<span id="{AddButton}" style="display:inline-block;width:20px;height:20px" class="m2atree_plus" onclick="{M2ATreeView_EventListenerList.onClick_AddButton(event)}"></span>;  
  	<span id='{AddButton}' style='display:inline-block;width:20px;height:20px' class='m2atree_plus' onclick='{M2ATreeView_EventListenerList.onClick_AddButton(event)}'></span>;     
  	</textarea>  	
  </div>
  
  <div>
  	<textarea id="rsltTextArea" cols="100" rows="10" >
  	</textarea>  	
  </div>
  
</body>
</html>



	
	